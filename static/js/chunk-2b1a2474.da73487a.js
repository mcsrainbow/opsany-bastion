(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b1a2474"],{"3a2e":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-table",{attrs:{loading:t.tableLoading,dataSource:t.tableData,columns:t.columns,pagination:Object.assign({},t.tableQuery,{showSizeChanger:!0,showTotal:function(t){return"共 "+t+" 条数据"},showQuickJumper:!0}),rowKey:function(t){return t.id}},on:{change:t.tableChange}})],1)},r=[],i=(a("4de4"),a("d3b7"),a("c24f")),s={props:["userList"],data:function(){return{tableQuery:{current:1},tableData:[],columns:[{title:"用户名",dataIndex:"username",ellipsis:!0},{title:"昵称",dataIndex:"ch_name",ellipsis:!0},{title:"邮箱",dataIndex:"email",ellipsis:!0}],tableLoading:!1}},methods:{getUserList:function(){var t=this;this.tableLoading=!0;var e={all_data:1};Object(i["c"])(e).then((function(e){t.tableData=e.data.filter((function(e){return t.userList.filter((function(t){return t==e.id})).length}))})).finally((function(){t.tableLoading=!1}))},tableChange:function(t){var e=t.current,a=t.pageSize;this.tableQuery.current=e,this.tableQuery.pageSize=a}},mounted:function(){this.getUserList()}},o=s,u=a("2877"),l=Object(u["a"])(o,n,r,!1,null,"e981b7c8",null);e["default"]=l.exports},"3be4":function(t,e,a){"use strict";a.d(e,"e",(function(){return i})),a.d(e,"a",(function(){return s})),a.d(e,"c",(function(){return o})),a.d(e,"b",(function(){return u})),a.d(e,"d",(function(){return l}));var n=a("b775"),r="access-strategy-v2/",i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["b"])({url:r,method:"get",params:t})},s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["b"])({url:r,method:"post",data:t})},o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["b"])({url:r,method:"put",data:t})},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["b"])({url:r,method:"delete",data:t})},l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["b"])({url:"strategy-status/",method:"put",data:t})}},"4adb":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-table",{attrs:{loading:t.tableLoading,dataSource:t.ssh_credential_host_id,columns:t.columns,pagination:Object.assign({},t.tableQuery,{showSizeChanger:!0,showTotal:function(t){return"共 "+t+" 条数据"},showQuickJumper:!0}),rowKey:function(t){return t.id}},on:{change:t.tableChange}})],1)},r=[],i={props:["ssh_credential_host_id"],data:function(){return{tableQuery:{current:1},tableData:[],columns:[{title:"凭证名称",dataIndex:"credential.name",ellipsis:!0},{title:"主机名称",dataIndex:"host.host_name",ellipsis:!0},{title:"IP地址",dataIndex:"host.host_address",ellipsis:!0}],tableLoading:!1}},methods:{tableChange:function(t){var e=t.current,a=t.pageSize;this.tableQuery.current=e,this.tableQuery.pageSize=a}},mounted:function(){}},s=i,o=a("2877"),u=Object(o["a"])(s,n,r,!1,null,"bd74d7a4",null);e["default"]=u.exports},"8d59":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-table",{attrs:{loading:t.tableLoading,dataSource:t.tableData,columns:t.columns,pagination:Object.assign({},t.tableQuery,{showSizeChanger:!0,showTotal:function(t){return"共 "+t+" 条数据"},showQuickJumper:!0}),rowKey:function(t){return t.id}},on:{change:t.tableChange}})],1)},r=[],i=(a("4de4"),a("d3b7"),a("c24f")),s={props:["userGroupList"],data:function(){return{tableQuery:{current:1},tableData:[],columns:[{title:"用户组名称",dataIndex:"name",ellipsis:!0},{title:"描述",dataIndex:"description",ellipsis:!0,customRender:function(t){return t||"--"}}],tableLoading:!1}},methods:{getUserGroupList:function(){var t=this;this.tableLoading=!0;var e={all_data:1};Object(i["a"])(e).then((function(e){t.tableData=e.data.filter((function(e){return t.userGroupList.filter((function(t){return t==e.id})).length}))})).finally((function(){t.tableLoading=!1}))},tableChange:function(t){var e=t.current,a=t.pageSize;this.tableQuery.current=e,this.tableQuery.pageSize=a}},mounted:function(){this.getUserGroupList()}},o=s,u=a("2877"),l=Object(u["a"])(o,n,r,!1,null,"f554c27c",null);e["default"]=l.exports},"9a1d":function(t,e,a){var n={"./Group.vue":"8d59","./PasswordVoucher.vue":"ddc9","./SSHKey.vue":"4adb","./User.vue":"3a2e","./VoucherGroup.vue":"9c8f"};function r(t){var e=i(t);return a(e)}function i(t){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}r.keys=function(){return Object.keys(n)},r.resolve=i,t.exports=r,r.id="9a1d"},"9c8f":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-table",{attrs:{loading:t.tableLoading,dataSource:t.credential_group,columns:t.columns,pagination:Object.assign({},t.tableQuery,{showSizeChanger:!0,showTotal:function(t){return"共 "+t+" 条数据"},showQuickJumper:!0}),rowKey:function(t){return t.id}},on:{change:t.tableChange}})],1)},r=[],i={props:["credential_group"],data:function(){return{tableQuery:{current:1},tableData:[],columns:[{title:"名称",dataIndex:"name",ellipsis:!0},{title:"描述",dataIndex:"description",ellipsis:!0,customRender:function(t){return t||"--"}}],tableLoading:!1}},methods:{tableChange:function(t){var e=t.current,a=t.pageSize;this.tableQuery.current=e,this.tableQuery.pageSize=a}},mounted:function(){}},s=i,o=a("2877"),u=Object(o["a"])(s,n,r,!1,null,"495fa691",null);e["default"]=u.exports},ad4c:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("content-header",[a("a-button",{attrs:{slot:"right",icon:"arrow-left",type:"primary"},on:{click:function(e){return t.$router.go(-1)}},slot:"right"},[t._v("返回")])],1),a("a-card",{attrs:{loading:t.loading}},[a("a-card",{attrs:{title:"基本信息"}},[a("a-row",{attrs:{gutter:[16,16]}},[a("a-col",{attrs:{span:8}},[t._v("策略名称："+t._s(t.info.name))]),a("a-col",{attrs:{span:8}},[t._v("有效期："+t._s(t.info.start_time||"-")+" ~ "+t._s(t.info.end_time||"-"))]),a("a-col",{attrs:{span:8}},[t._v(" 文件传输："+t._s(t.info.file_upload?"上传":"--")+"/"+t._s(t.info.file_download?"下载":"--")+" ")])],1),a("a-col",{attrs:{span:8}},[t._v(" 更多选项："+t._s(t.info.file_manager?"文件管理":"--")+"/"+t._s(t.info.copy_tool?"剪贴板":"--")+" ")]),a("a-col",{attrs:{span:8}},[t._v(" IP限制类型："+t._s(t.ipLimitList.find((function(e){return e.key==t.info.ip_limit}))&&t.ipLimitList.find((function(e){return e.key==t.info.ip_limit})).name)+" ")]),a("a-col",{attrs:{span:8}},[t._v("限制IP："),t._l(t.info.limit_list,(function(e,n){return a("a-tag",{key:n},[t._v(t._s(e))])}))],2)],1),a("a-tabs",{staticStyle:{"margin-top":"20px"},attrs:{type:"card"}},[a("a-tab-pane",{key:"1",attrs:{tab:"授权用户"}},[a("a-tabs",{attrs:{"tab-position":"left"}},[a("a-tab-pane",{key:"1",attrs:{tab:"授权用户"}},[a("User",{attrs:{userList:t.userList}})],1),a("a-tab-pane",{key:"2",attrs:{tab:"授权用户组"}},[a("Group",{attrs:{userGroupList:t.userGroupList}})],1)],1)],1),a("a-tab-pane",{key:"2",attrs:{tab:"资源凭证"}},[a("a-tabs",{attrs:{"tab-position":"left"}},[a("a-tab-pane",{key:"1",attrs:{tab:"密码凭证"}},[a("PasswordVoucher",{attrs:{password_credential_host_id:t.password_credential_host_id}})],1),a("a-tab-pane",{key:"2",attrs:{tab:"SSH密钥"}},[a("SSHKey",{attrs:{ssh_credential_host_id:t.ssh_credential_host_id}})],1),a("a-tab-pane",{key:"3",attrs:{tab:"凭证分组"}},[a("VoucherGroup",{attrs:{credential_group:t.credential_group}})],1)],1)],1)],1)],1)],1)},r=[],i=(a("d3b7"),a("3be4")),s=a("ca00"),o={components:Object(s["a"])(a("9a1d")),data:function(){return{id:void 0,loading:!1,info:{},ipLimitList:[{key:1,name:"无"},{key:2,name:"黑名单"},{key:3,name:"白名单"}],userList:[],userGroupList:[],password_credential_host_id:[],ssh_credential_host_id:[],credential_group:[]}},methods:{getAccessStrategy:function(){var t=this;this.loading=!0,Object(i["e"])({id:this.id}).then((function(e){t.info=e.data.strategy,t.userList=e.data.user.user||[],t.userGroupList=e.data.user.user_group||[],t.password_credential_host_id=e.data.credential_host.password_credential_host_id||[],t.ssh_credential_host_id=e.data.credential_host.ssh_credential_host_id||[],t.credential_group=e.data.credential_host.credential_group||[]})).finally((function(){t.loading=!1}))}},mounted:function(){this.id=this.$route.query.id,this.getAccessStrategy()}},u=o,l=a("2877"),c=Object(l["a"])(u,n,r,!1,null,"6b223522",null),d=c.exports;e["default"]=d},ddc9:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-table",{attrs:{loading:t.tableLoading,dataSource:t.password_credential_host_id,columns:t.columns,pagination:Object.assign({},t.tableQuery,{showSizeChanger:!0,showTotal:function(t){return"共 "+t+" 条数据"},showQuickJumper:!0}),rowKey:function(t){return t.id}},on:{change:t.tableChange}})],1)},r=[],i={props:["password_credential_host_id"],data:function(){return{tableQuery:{current:1},tableData:[],columns:[{title:"凭证名称",dataIndex:"credential.name",ellipsis:!0},{title:"主机名称",dataIndex:"host.host_name",ellipsis:!0},{title:"IP地址",dataIndex:"host.host_address",ellipsis:!0}],tableLoading:!1}},methods:{tableChange:function(t){var e=t.current,a=t.pageSize;this.tableQuery.current=e,this.tableQuery.pageSize=a}},mounted:function(){}},s=i,o=a("2877"),u=Object(o["a"])(s,n,r,!1,null,"9a977e54",null);e["default"]=u.exports}}]);