(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b17f900"],{1508:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("content-header",[a("div",{attrs:{slot:"docs"},slot:"docs"},[t._v("通过增加网络代理，堡垒机可以管理不同网络内的主机和数据库资源。")])]),a("a-card",[a("div",{staticClass:"top_search"},[a("div",[a("a-input-search",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入关键字搜索",allowClear:""},on:{search:t.searchTable},model:{value:t.tableQuery.search_data,callback:function(e){t.$set(t.tableQuery,"search_data",e)},expression:"tableQuery.search_data"}},[a("a-select",{staticStyle:{width:"150px"},attrs:{slot:"addonBefore"},slot:"addonBefore",model:{value:t.tableQuery.search_type,callback:function(e){t.$set(t.tableQuery,"search_type",e)},expression:"tableQuery.search_type"}},t._l(t.searchList,(function(e){return a("a-select-option",{key:e.key},[t._v(t._s(e.name))])})),1)],1)],1),t.$store.state.btnAuth.btnAuth.bastion_network_proxy_create?a("a-button",{attrs:{icon:"plus",type:"primary"},on:{click:function(e){return t.$refs.AddNetworkProxy.show()}}},[t._v("新建")]):t._e()],1),a("a-table",{attrs:{loading:t.tableLoading,dataSource:t.tableData,columns:t.columns,bordered:"",pagination:Object.assign({},t.tableQuery,{showSizeChanger:!0,showTotal:function(t){return"共 "+t+" 条数据"},showQuickJumper:!0})},on:{change:t.tableChange},scopedSlots:t._u([{key:"name",fn:function(e,n){return[a("a",{on:{click:function(e){return t.$router.push({path:"/setting/networkProxy/networkProxyDetails",query:{id:n.id}})}}},[t._v(t._s(e))])]}},{key:"system_type",fn:function(e,n){return[n.linux_ip&&n.windows_ip?a("div",{staticClass:"table_cell"},[a("p",[t._v("Linux")]),a("p",[t._v("Windows")])]):n.linux_ip?a("div",{staticClass:"table_cell"},[a("p",[t._v("Linux")])]):n.windows_ip?a("div",{staticClass:"table_cell"},[a("p",[t._v("Windows")])]):t._e()]}},{key:"ip",fn:function(e,n){return[n.linux_ip&&n.windows_ip?a("div",{staticClass:"table_cell"},[a("p",[t._v(t._s(n.linux_ip||"--"))]),a("p",[t._v(t._s(n.windows_ip||"--"))])]):n.linux_ip?a("div",{staticClass:"table_cell"},[a("p",[t._v(t._s(n.linux_ip||"--"))])]):n.windows_port?a("div",{staticClass:"table_cell"},[a("p",[t._v(t._s(n.windows_ip||"--"))])]):t._e()]}},{key:"port",fn:function(e,n){return[n.linux_port&&n.windows_port?a("div",{staticClass:"table_cell"},[a("p",[t._v(t._s(n.linux_port||"--"))]),a("p",[t._v(t._s(n.windows_port||"--"))])]):n.linux_port?a("div",{staticClass:"table_cell"},[a("p",[t._v(t._s(n.linux_port||"--"))])]):n.windows_port?a("div",{staticClass:"table_cell"},[a("p",[t._v(t._s(n.windows_port||"--"))])]):t._e()]}},{key:"description",fn:function(e){return[t._v(" "+t._s(e||"--")+" ")]}},{key:"action",fn:function(e,n){return[t.$store.state.btnAuth.btnAuth.bastion_network_proxy_update?a("a",{on:{click:function(e){return t.$refs.AddNetworkProxy.show(n)}}},[t._v("编辑")]):t._e(),t.$store.state.btnAuth.btnAuth.bastion_network_proxy_delete?a("a",{staticStyle:{color:"#333",margin:"0 0 0 10px"},on:{click:function(e){return t.deleteData(n)}}},[t._v("删除")]):t._e()]}}])})],1),a("AddNetworkProxy",{ref:"AddNetworkProxy",on:{father:t.getNetworkProxyData}})],1)},o=[],i=(a("d81d"),a("d3b7"),a("96cf"),a("1da1")),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-drawer",{attrs:{bodyStyle:{paddingBottom:"80px"},width:"800px",visible:t.visible},on:{close:t.onClose}},[a("h3",{staticClass:"drawer_title",attrs:{slot:"title"},slot:"title"},[a("span",[t._v(t._s(t.title))]),a("a-alert",{staticStyle:{margin:"0 0 0 20px","font-weight":"500"},attrs:{closable:"",message:"Linux和Windows至少创建一项，否则数据创建不成功",type:"warning","show-icon":""}})],1),a("a-form-model",{ref:"ruleForm",attrs:{model:t.formData,rules:t.rules,"label-col":{span:3},"wrapper-col":{span:21}}},[a("div",[a("h3",[t._v("创建名称 "),a("span",{staticStyle:{color:"red"}},[t._v("*")])]),a("a-form-model-item",{attrs:{label:"名称",prop:"name"}},[a("a-input",{attrs:{placeholder:"请输入名称"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1)],1),a("div",[a("h3",[t._v("Linux")]),a("a-form-model-item",{attrs:{label:"IP地址",prop:"linux_ip"}},[a("a-input",{attrs:{placeholder:"请输入IP地址"},model:{value:t.formData.linux_ip,callback:function(e){t.$set(t.formData,"linux_ip",e)},expression:"formData.linux_ip"}})],1),a("a-form-model-item",{attrs:{label:"端口",prop:"linux_port"}},[a("a-input-number",{staticStyle:{width:"100%"},attrs:{min:1,max:65535,placeholder:"请输入端口范围1-65535"},model:{value:t.formData.linux_port,callback:function(e){t.$set(t.formData,"linux_port",e)},expression:"formData.linux_port"}})],1),a("a-form-model-item",{attrs:{label:"用户名",prop:"linux_login_name"}},[a("a-input",{attrs:{placeholder:"请输入用户名"},model:{value:t.formData.linux_login_name,callback:function(e){t.$set(t.formData,"linux_login_name",e)},expression:"formData.linux_login_name"}})],1),a("a-form-model-item",{attrs:{label:"密码",prop:"linux_login_password"}},[a("a-input-password",{attrs:{placeholder:"请输入密码"},model:{value:t.formData.linux_login_password,callback:function(e){t.$set(t.formData,"linux_login_password",e)},expression:"formData.linux_login_password"}})],1)],1),a("div",[a("h3",[t._v("Windows")]),a("a-form-model-item",{attrs:{label:"IP地址",prop:"windows_ip"}},[a("a-input",{attrs:{placeholder:"请输入IP地址"},model:{value:t.formData.windows_ip,callback:function(e){t.$set(t.formData,"windows_ip",e)},expression:"formData.windows_ip"}})],1),a("a-form-model-item",{attrs:{label:"端口"}},[a("a-input-number",{staticStyle:{width:"100%"},attrs:{min:1,max:65535,placeholder:"请输入端口范围1-65535"},model:{value:t.formData.windows_port,callback:function(e){t.$set(t.formData,"windows_port",e)},expression:"formData.windows_port"}})],1)],1),a("div",[a("h3",[t._v("网络代理描述")]),a("a-form-model-item",{attrs:{label:"描述",prop:"description"}},[a("a-textarea",{attrs:{placeholder:"请输入网络代理描述，字数在200字以内"},model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}})],1)],1)]),a("footer",[a("a-button",{staticStyle:{float:"right",margin:"0 20px 0 10px"},attrs:{loading:t.btnLoading,type:"primary"},on:{click:t.onSubmit}},[t._v("确定")]),a("a-button",{staticStyle:{float:"right"},on:{click:t.onClose}},[t._v("取消")])],1)],1)},s=[],l=(a("a4d3"),a("e01a"),a("b0c0"),a("5530")),c=a("2783"),u={data:function(){return{visible:!1,title:"新建网络代理",formData:{},rules:{name:[{required:!0,message:"请填写名称",whitespace:!0}],linux_ip:[{pattern:/^((2[0-4]\d|25[0-5]|[01]?\d\d?)\.){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)$/,message:"请输入有效的IP地址"}],windows_ip:[{pattern:/^((2[0-4]\d|25[0-5]|[01]?\d\d?)\.){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)$/,message:"请输入有效的IP地址"}],description:[{max:200,message:"描述字数在200字以内"}],linux_login_name:[{pattern:/^[^\u4e00-\u9fa5]*$/,message:"用户名不能含有中文"}],linux_login_password:[{pattern:/^[^\u4e00-\u9fa5]*$/,message:"密码不能含有中文"}]},btnLoading:!1,activeNetworkProxy:{}}},methods:{show:function(t){this.visible=!0,t?(this.title="编辑网络代理",this.isEdit=!0,this.activeNetworkProxy=t,this.formData={name:t.name,linux_ip:t.linux_ip,linux_port:t.linux_port,linux_login_name:t.linux_login_name,linux_login_password:t.linux_login_name?"******":"",windows_ip:t.windows_ip,windows_port:t.windows_port,description:t.description}):(this.title="新建网络代理",this.isEdit=!1)},onClose:function(){this.visible=!1,this.formData={},this.activeNetworkProxy={},this.$emit("father")},onSubmit:function(){var t=this;this.$refs.ruleForm.validate((function(e){e&&(t.btnLoading=!0,t.isEdit?Object(c["c"])(Object(l["a"])(Object(l["a"])({},t.formData),{},{id:t.activeNetworkProxy.id})).then((function(e){200==e.code&&(t.$message.success(e.message),t.onClose())})).finally((function(){t.btnLoading=!1})):Object(c["a"])(t.formData).then((function(e){200==e.code&&(t.$message.success(e.message),t.onClose())})).finally((function(){t.btnLoading=!1})))}))}}},d=u,p=(a("cdc2"),a("2877")),m=Object(p["a"])(d,r,s,!1,null,"007d7773",null),_=m.exports,f=a("6f7c"),h={data:function(){return{tableLoading:!1,tableData:[],columns:[{title:"名称",dataIndex:"name",scopedSlots:{customRender:"name"},width:200,ellipsis:!0},{title:"系统类型",dataIndex:"system_type",scopedSlots:{customRender:"system_type"},width:200},{title:"IP地址",dataIndex:"ip",scopedSlots:{customRender:"ip"},width:200},{title:"端口",dataIndex:"port",scopedSlots:{customRender:"port"},width:100},{title:"描述",dataIndex:"description",scopedSlots:{customRender:"description"}},{title:"操作",scopedSlots:{customRender:"action"},align:"center",width:"120px"}],tableQuery:{search_data:void 0,search_type:"name",current:1,pageSize:10,total:0},searchList:[{name:"名称",key:"name"},{name:"Linux IP地址",key:"linux_ip"},{name:"Windows IP地址",key:"windows_ip"}]}},mounted:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["a"])(t,"visit-network-proxy");case 2:a=e.sent,a&&t.getNetworkProxyData();case 4:case"end":return e.stop()}}),e)})))()},methods:{searchTable:function(){this.tableQuery.current=1,this.getNetworkProxyData()},tableChange:function(t){var e=t.current,a=t.pageSize;this.tableQuery.current=e,this.tableQuery.pageSize=a,this.getNetworkProxyData()},getNetworkProxyData:function(){var t=this;this.tableLoading=!0,Object(c["d"])(this.tableQuery).then((function(e){200==e.code&&e.data&&e.data.data&&(t.tableQuery.current=e.data.current,t.tableQuery.total=e.data.total,e.data.data.map((function(t){t.key=t.id})),t.tableData=e.data.data)})).finally((function(){t.tableLoading=!1}))},deleteData:function(t){var e=this;this.$confirm({title:"确认删除该项数据吗?",onOk:function(){return new Promise((function(a,n){Object(c["b"])({id:t.id}).then((function(t){200==t.code&&(e.$message.success(t.message),a(),e.getNetworkProxyData())}))}))}})}},components:{AddNetworkProxy:_}},w=h,b=(a("8dd6"),Object(p["a"])(w,n,o,!1,null,"717e8236",null));e["default"]=b.exports},"1da1":function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));a("d3b7");function n(t,e,a,n,o,i,r){try{var s=t[i](r),l=s.value}catch(c){return void a(c)}s.done?e(l):Promise.resolve(l).then(n,o)}function o(t){return function(){var e=this,a=arguments;return new Promise((function(o,i){var r=t.apply(e,a);function s(t){n(r,o,i,s,l,"next",t)}function l(t){n(r,o,i,s,l,"throw",t)}s(void 0)}))}}},2783:function(t,e,a){"use strict";a.d(e,"d",(function(){return o})),a.d(e,"a",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"b",(function(){return s}));var n=a("b775"),o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["b"])({url:"network-proxy/",method:"get",params:t})},i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["b"])({url:"network-proxy/",method:"post",data:t})},r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["b"])({url:"network-proxy/",method:"put",data:t})},s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["b"])({url:"network-proxy/",method:"delete",data:t})}},"6f7c":function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));a("d3b7");var n=a("a18c"),o=a("b775"),i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o["b"])({url:"authentication/",method:"get",params:t})},r=function(){n["a"].push({name:"noAuth"})},s=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Promise((function(a,n){setTimeout((function(){t.$loading.show()}),0),i({action_id:e}).then((function(t){return t.data||r(),a(t.data)})).catch((function(){return r(),a(!1)})).finally((function(){setTimeout((function(){t.$loading.hide()}),0)}))}))}},"8dd6":function(t,e,a){"use strict";var n=a("99d9"),o=a.n(n);o.a},"99d9":function(t,e,a){},cdc2:function(t,e,a){"use strict";var n=a("f1c7"),o=a.n(n);o.a},f1c7:function(t,e,a){}}]);